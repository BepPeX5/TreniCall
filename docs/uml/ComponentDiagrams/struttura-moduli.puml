@startuml
!theme plain
title TreniCal - Component Diagram: Struttura Moduli Maven

package "trenicall-parent" {
}

package "trenicall-common" {
    component "Common Utilities" as COMMON
}

package "trenicall-server" {

    package "gRPC Layer" {
        component "Proto Definitions" as PROTO
        component "gRPC Implementations" as GRPC_IMPL
    }

    package "Business Layer" {
        component "Services" as SERVICES
        component "Design Patterns" as PATTERNS
    }

    package "Domain Layer" {
        component "Entities" as ENTITIES
        component "Repositories" as REPOSITORIES
        component "Value Objects" as VALUE_OBJECTS
    }

    component "Configuration" as CONFIG
}

package "trenicall-client" {
    component "Swing GUI" as CLIENT_GUI
    component "gRPC Client Service" as CLIENT_GRPC
}

package "trenicall-admin" {
    component "Admin GUI" as ADMIN_GUI
    component "Admin Services" as ADMIN_SERVICES
    component "File System Interface" as ADMIN_FS
}

package "External Dependencies" {
    component "Spring Boot" as SPRING
    component "gRPC Framework" as GRPC_FW
    component "JPA/Hibernate" as JPA
    component "MySQL Driver" as MYSQL_DRIVER
    component "H2 Database" as H2_DRIVER
}

COMMON --> "trenicall-parent"
"trenicall-server" --> COMMON
"trenicall-client" --> COMMON
"trenicall-admin" --> COMMON

GRPC_IMPL --> PROTO
GRPC_IMPL --> SERVICES
SERVICES --> PATTERNS
SERVICES --> ENTITIES
SERVICES --> REPOSITORIES
ENTITIES --> VALUE_OBJECTS
REPOSITORIES --> ENTITIES

CLIENT_GUI --> CLIENT_GRPC
CLIENT_GRPC --> PROTO

ADMIN_GUI --> ADMIN_SERVICES
ADMIN_SERVICES --> ADMIN_FS

SERVICES --> SPRING
GRPC_IMPL --> GRPC_FW
REPOSITORIES --> JPA
JPA --> MYSQL_DRIVER
JPA --> H2_DRIVER

CLIENT_GRPC --> GRPC_IMPL : gRPC calls
ADMIN_FS --> GRPC_IMPL : File notifications

@enduml